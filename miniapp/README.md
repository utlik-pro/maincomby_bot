# MAIN Community Mini App

Telegram Mini App –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ MAIN Community —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥–∞, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –≠–∫—Ä–∞–Ω—ã
- **Home** - –î–∞—à–±–æ—Ä–¥ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **Events** - –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π, QR-–±–∏–ª–µ—Ç—ã, check-in
- **Network** - Tinder-—Å—Ç–∏–ª—å —Å–≤–∞–π–ø–∏–Ω–≥ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤
- **Achievements** - –†–∞–Ω–≥–∏, –º–µ–¥–∞–ª–∏, –ª–∏–¥–µ—Ä–±–æ—Ä–¥
- **Profile** - –ü—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–¥–ø–∏—Å–∫–∞

### –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –°–≤–∞–π–ø—ã | –§–∏—á–∏ |
|-------|------|--------|------|
| Free | $0 | 5/–¥–µ–Ω—å | –ë–∞–∑–æ–≤—ã–µ |
| Light | $5/–º–µ—Å | 20/–¥–µ–Ω—å | + –ö—Ç–æ –ª–∞–π–∫–Ω—É–ª, —Ñ–∏–ª—å—Ç—Ä—ã |
| Pro | $15/–º–µ—Å | ‚àû | + –°—É–ø–µ—Ä–ª–∞–π–∫–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |

### –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
- **XP —Å–∏—Å—Ç–µ–º–∞** - –æ—á–∫–∏ –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è
- **–†–∞–Ω–≥–∏** - –æ—Ç –†—è–¥–æ–≤–æ–≥–æ –¥–æ –ú–∞–π–æ—Ä–∞
- **–ú–µ–¥–∞–ª–∏** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–õ–∏–¥–µ—Ä–±–æ—Ä–¥** - —Ç–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd miniapp
npm install
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5173

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```env
VITE_SUPABASE_URL=https://ndpkxustvcijykzxqxrn.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase:

```bash
# –§–∞–π–ª: migrations/add_miniapp_tables.sql
```

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç:
- –ü–æ–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤ `bot_users`
- –ü–æ–ª—è –¥–ª—è —Ñ–æ—Ç–æ –≤ `bot_profiles`
- –¢–∞–±–ª–∏—Ü—É `xp_transactions`
- –¢–∞–±–ª–∏—Ü—É `user_achievements`
- QR-–∫–æ–¥ –±–∏–ª–µ—Ç—ã –≤ `bot_registrations`

## –î–µ–ø–ª–æ–π –Ω–∞ Vercel

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Vercel
2. –£–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É: `miniapp`
3. –î–æ–±–∞–≤—å—Ç–µ Environment Variables:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
4. Deploy!

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram –±–æ—Ç—É

1. –í BotFather: `/setmenubutton`
2. –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Mini App
3. –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –±–æ—Ç–∞:

```python
from aiogram.types import WebAppInfo, InlineKeyboardMarkup, InlineKeyboardButton

webapp_btn = InlineKeyboardButton(
    text="üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
    web_app=WebAppInfo(url="https://your-app.vercel.app")
)
keyboard = InlineKeyboardMarkup(inline_keyboard=[[webapp_btn]])
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
miniapp/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/         # –ë–∞–∑–æ–≤—ã–µ (Button, Card, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ToastContainer.tsx
‚îÇ   ‚îú‚îÄ‚îÄ screens/        # –≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomeScreen.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventsScreen.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NetworkScreen.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AchievementsScreen.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProfileScreen.tsx
‚îÇ   ‚îú‚îÄ‚îÄ hooks/          # React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ lib/            # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram.ts # Telegram SDK
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts # Supabase –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store.ts    # Zustand —Å—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ types/          # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.css
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ vite.config.ts
‚îú‚îÄ‚îÄ tailwind.config.js
‚îî‚îÄ‚îÄ vercel.json
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **React 18** + TypeScript
- **Vite** - —Å–±–æ—Ä–∫–∞
- **Tailwind CSS** - —Å—Ç–∏–ª–∏
- **Framer Motion** - –∞–Ω–∏–º–∞—Ü–∏–∏
- **Zustand** - —Å—Ç–µ–π—Ç –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
- **TanStack Query** - data fetching
- **Supabase** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Telegram Web App SDK** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## Check-in —Å–∏—Å—Ç–µ–º–∞

### –î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
2. –ü–æ–ª—É—á–∞—é—Ç QR-–±–∏–ª–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
3. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç QR –≤–æ–ª–æ–Ω—Ç—ë—Ä—É –Ω–∞ –≤—Ö–æ–¥–µ
4. –ü–æ–ª—É—á–∞—é—Ç +50 XP –∑–∞ check-in

### –î–ª—è –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤:
1. –û—Ç–∫—Ä—ã–≤–∞—é—Ç Scanner –≤ —Ä–∞–∑–¥–µ–ª–µ Events
2. –°–∫–∞–Ω–∏—Ä—É—é—Ç QR —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–∏–ª–∏ –≤–≤–æ–¥—è—Ç –∫–æ–¥)
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç check-in
4. –£—á–∞—Å—Ç–Ω–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–∫—Ä–∞–Ω
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `src/screens/`
2. –î–æ–±–∞–≤—å—Ç–µ lazy import –≤ `App.tsx`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `renderScreen()` switch

### –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
1. –î–æ–±–∞–≤—å—Ç–µ –≤ `ACHIEVEMENTS` –≤ `src/types/index.ts`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏–∫—É —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## TODO

- [ ] –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π QR —Å–∫–∞–Ω–µ—Ä (html5-qrcode)
- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- [ ] –û–ø–ª–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- [ ] –ß–∞—Ç —Å –º–∞—Ç—á–∞–º–∏
