# Полное описание функций MAIN Community MiniApp

## Обзор приложения

MAIN Community MiniApp — это Telegram мини-приложение для сообщества MAIN, которое предоставляет:
- Нетворкинг через свайпы (как Tinder для бизнеса)
- Управление событиями (регистрация, check-in)
- Геймификацию (XP, ранги, достижения)
- Управление профилем

---

## 1. HomeScreen (Главная страница)

**Путь:** Вкладка "Главная" в нижней навигации

### 1.1 Элементы экрана

| Элемент | Описание |
|---------|----------|
| **Профиль пользователя** | Аватар, имя, ранг, XP, прогресс до следующего ранга |
| **Быстрые действия** | Кнопки навигации на другие экраны |
| **Статистика** | События, матчи, достижения (3 карточки) |
| **ТОП-3 лидерборда** | Три лучших участника по XP |
| **Консультация** | Кнопка записи на консультацию с Дмитрием Утликом |
| **Premium баннер** | Предложение подписки (для Free пользователей) |
| **Новости** | Последние новости сообщества |
| **Объявления** | Модальное окно о новых событиях |

### 1.2 Функциональность

- **Просмотр профиля:** Отображает имя, фото из Telegram, текущий ранг и XP
- **Прогресс-бар:** Показывает прогресс до следующего ранга
- **Навигация:** Переход на другие экраны по клику на карточки
- **Лидерборд:** Показывает топ-3 с аватарами и XP
- **Консультация:** Открывает Telegram чат с @dmitry_utlik
- **Premium:** Переход на экран подписки

### 1.3 Easter Eggs

| Действие | Результат |
|----------|-----------|
| 6 тапов на логотип | Разблокировка скрытой функции |
| 10 тапов на ранг | Анимация конфетти |
| Посещение всех табов за 10 сек | Достижение "Speed Runner" |

---

## 2. EventsScreen (События)

**Путь:** Вкладка "События" в нижней навигации

### 2.1 Режимы отображения

1. **Список событий** — карточки активных событий
2. **Мои билеты** — зарегистрированные события
3. **Календарь** — календарный вид событий

### 2.2 Карточка события

| Поле | Описание |
|------|----------|
| **Обложка** | Изображение события |
| **Название** | Заголовок события |
| **Тип** | Workshop / Meetup / Conference / Hackathon |
| **Дата и время** | Когда проходит |
| **Место** | Адрес проведения |
| **Кнопка регистрации** | "Зарегистрироваться" / "Отменить" |

### 2.3 Типы событий

| Тип | Иконка | Описание |
|-----|--------|----------|
| `workshop` | Инструменты | Практическое занятие |
| `meetup` | Люди | Неформальная встреча |
| `conference` | Микрофон | Конференция с докладами |
| `hackathon` | Код | Соревнование разработчиков |

### 2.4 Процесс регистрации

1. Пользователь нажимает "Зарегистрироваться"
2. Система создает запись в `bot_registrations`
3. Генерируется уникальный код билета: `MAIN-[timestamp]-[random]`
4. Пользователь получает +10 XP
5. Появляется toast "Вы зарегистрированы!"

### 2.5 Check-in на событии

**Для волонтеров:**
1. Включить режим волонтера в настройках
2. Нажать "Сканировать QR" на событии
3. Отсканировать QR-код билета участника
4. Система подтверждает check-in
5. Участник получает +50 XP

**Для участников:**
1. Показать QR-код билета волонтеру
2. После сканирования статус меняется на "attended"
3. Получение +50 XP

### 2.6 XP за события

| Действие | XP |
|----------|-----|
| Регистрация на событие | +10 |
| Check-in (посещение) | +50 |
| Оставить фидбек | +20 |

---

## 3. AchievementsScreen (Достижения)

**Путь:** Вкладка "Достижения" в нижней навигации

### 3.1 Система рангов

| Ранг | XP | Название (RU) |
|------|-----|---------------|
| newcomer | 0-99 | Новичок |
| member | 100-299 | Участник |
| activist | 300-599 | Активист |
| enthusiast | 600-999 | Энтузиаст |
| contributor | 1000-1999 | Контрибьютор |
| ambassador | 2000-4999 | Амбассадор |
| expert | 5000-9999 | Эксперт |
| leader | 10000-19999 | Лидер |
| founder | 20000+ | Основатель |

### 3.2 Достижения

| ID | Название | Условие | XP награда |
|----|----------|---------|------------|
| `first_step` | Первый шаг | Посетить 1 событие | +50 |
| `on_fire` | В ударе | Посетить 3 события | +100 |
| `social_butterfly` | Социальная бабочка | 10 матчей | +150 |
| `networker` | Нетворкер | 25 матчей | +200 |
| `regular` | Завсегдатай | 10 событий | +150 |
| `profile_star` | Звезда профиля | Заполнить профиль на 100% | +25 |
| `early_bird` | Ранняя пташка | Зарегистрироваться первым | +30 |
| `feedback_hero` | Герой фидбека | Оставить 5 отзывов | +75 |

### 3.3 Гайд "Как заработать XP"

Информационный раздел с описанием всех способов получения XP:
- Регистрация на события
- Посещение событий
- Получение матчей
- Приглашение друзей
- Заполнение профиля
- Достижения

### 3.4 Лидерборд ТОП-10

Отображает 10 пользователей с наибольшим XP:
- Позиция в рейтинге
- Аватар с скином
- Имя пользователя
- XP и ранг

---

## 4. ProfileScreen (Профиль)

**Путь:** Вкладка "Профиль" в нижней навигации

### 4.1 Секции профиля

| Секция | Содержимое |
|--------|------------|
| **Шапка** | Аватар, имя, ранг, XP, статистика |
| **О себе** | Bio, occupation, city |
| **Ищу / Помогу** | looking_for, can_help_with |
| **Навыки** | До 10 тегов skills |
| **Интересы** | До 10 тегов interests |
| **Компания** | Компания и должность |
| **Ссылки** | Социальные сети |
| **Бейджи** | Топ-4 бейджа |
| **Подписка** | Текущий тариф |
| **Скин** | Выбор аватар-скина |
| **Настройки** | Push, видимость, добавить на экран |

### 4.2 Редактируемые поля

| Поле | Тип | Валидация |
|------|-----|-----------|
| **Bio** | Текст | Макс. 500 символов |
| **Occupation** | Текст | Макс. 100 символов |
| **City** | Выбор | Из списка городов |
| **Looking for** | Текст | Макс. 300 символов |
| **Can help with** | Текст | Макс. 300 символов |
| **Skills** | Теги | До 10 тегов, макс. 30 символов каждый |
| **Interests** | Теги | До 10 тегов, макс. 30 символов каждый |

### 4.3 Социальные ссылки

| Тип | Валидация URL |
|-----|---------------|
| LinkedIn | linkedin.com/in/* |
| GitHub | github.com/* |
| GitLab | gitlab.com/* |
| Behance | behance.net/* |
| Dribbble | dribbble.com/* |
| Instagram | instagram.com/* |
| Telegram Channel | t.me/* |
| Portfolio | Любой URL |
| Website | Любой URL |

### 4.4 Подписки

| Тариф | Свайпов/день | Особенности |
|-------|--------------|-------------|
| **Free** | 5 | Базовый профиль |
| **Light** | 20 | Видеть кто лайкнул, 1 суперлайк/день |
| **Pro** | Безлимит | 5 суперлайков, приоритет, VIP бейдж |

### 4.5 Настройки

| Настройка | Описание |
|-----------|----------|
| **Push-уведомления** | Включить/выключить push в Telegram |
| **Видимость профиля** | Скрыть/показать профиль в свайпах |
| **Добавить на экран** | Добавить приложение как PWA |

---

## 5. NetworkScreen (Нетворкинг)

**Статус:** Скрыт из навигации (ожидание критической массы профилей)

### 5.1 Основной функционал

| Функция | Описание |
|---------|----------|
| **Свайп вправо** | Like профиля |
| **Свайп влево** | Skip профиля |
| **Суперлайк** | Особый лайк (ограничено подпиской) |
| **Матч** | Создается при взаимном лайке |

### 5.2 Карточка профиля в свайпах

- Фото с скином
- Имя и возраст
- Должность и компания
- Город
- Навыки (теги)
- Bio (краткое)

### 5.3 Лимиты свайпов

| Тариф | Свайпов/день | Суперлайков/день |
|-------|--------------|------------------|
| Free | 5 | 0 |
| Light | 20 | 1 |
| Pro | Безлимит | 5 |

### 5.4 Матчи

При взаимном лайке:
1. Создается запись в `bot_matches`
2. Обоим пользователям начисляется +15 XP
3. Отправляется push-уведомление
4. Создается in-app уведомление
5. Можно просмотреть в списке матчей

---

## 6. NotificationsScreen (Уведомления)

**Путь:** Иконка колокольчика на главной странице

### 6.1 Типы уведомлений

| Тип | Описание | Пример |
|-----|----------|--------|
| `event_reminder` | Напоминание о событии | "Событие 'Workshop' начнется через 1 час" |
| `event_invitation` | Приглашение на событие | "Новое событие: Tech Meetup" |
| `match` | Новый матч | "У вас новый матч с Иваном!" |
| `achievement` | Достижение | "Вы получили достижение 'Первый шаг'" |
| `rank_up` | Повышение ранга | "Поздравляем! Вы достигли ранга Активист" |
| `xp` | Начисление XP | "+50 XP за посещение события" |
| `system` | Системное | "Добро пожаловать в MAIN Community!" |

### 6.2 Функциональность

- Просмотр списка уведомлений
- Отметить как прочитанное (клик)
- Отметить все как прочитанные
- Переход по ссылке в уведомлении
- Индикатор непрочитанных (badge на иконке)

---

## 7. OnboardingScreen (Онбординг)

**Путь:** Показывается автоматически новым пользователям

### 7.1 Слайды

| # | Заголовок | Содержание |
|---|-----------|------------|
| 1 | Добро пожаловать | Приветствие в MAIN Community |
| 2 | Нетворкинг | Описание системы свайпов |
| 3 | Заполни профиль | Важность заполненного профиля |
| 4 | События и XP | Как зарабатывать XP |
| 5 | Готово! | Переход к приложению |

### 7.2 Элементы управления

- Кнопка "Далее" — переход к следующему слайду
- Кнопка "Пропустить" — пропуск онбординга
- Индикаторы прогресса (точки)
- Свайп для навигации

---

## 8. Общие UI компоненты

### 8.1 Модальные окна

| Компонент | Использование |
|-----------|---------------|
| **ConfirmDialog** | Подтверждение действий (отмена регистрации) |
| **PhoneDialog** | Ввод номера телефона |
| **EventAnnouncementModal** | Объявление о новом событии |

### 8.2 Формы ввода

| Компонент | Использование |
|-----------|---------------|
| **TagInput** | Ввод навыков и интересов |
| **CompanySelector** | Выбор компании |
| **SocialLinksEdit** | Редактирование ссылок |

### 8.3 Обратная связь

| Компонент | Типы |
|-----------|------|
| **Toast** | success, error, info, xp |
| **Haptic Feedback** | light, medium, heavy, success, error |

---

## 9. Интеграция с Telegram

### 9.1 Используемые API

| API | Назначение |
|-----|------------|
| `WebApp.initDataUnsafe` | Получение данных пользователя |
| `WebApp.MainButton` | Управление главной кнопкой |
| `WebApp.BackButton` | Кнопка "Назад" |
| `WebApp.showConfirm` | Диалог подтверждения |
| `WebApp.showAlert` | Алерт |
| `WebApp.HapticFeedback` | Тактильная обратная связь |
| `WebApp.showScanQrPopup` | QR-сканер |
| `WebApp.requestContact` | Запрос номера телефона |
| `WebApp.openTelegramLink` | Открытие Telegram ссылки |

### 9.2 Push-уведомления

Требования:
- Telegram 8.0+
- Разрешение пользователя
- Бот должен иметь права на отправку

Типы push:
- Напоминание о событии (за 1 час)
- Новый матч
- Новое достижение
- Повышение ранга
