# Тестовое окружение и данные

## 1. Требования к устройству

### 1.1 Минимальные требования

| Параметр | Требование |
|----------|------------|
| **Telegram** | Версия 8.0 или выше |
| **iOS** | iOS 14.0+ |
| **Android** | Android 7.0+ |
| **Интернет** | Стабильное соединение |

### 1.2 Рекомендуемые устройства для тестирования

**iOS:**
- iPhone 12/13/14/15 (основные)
- iPhone SE (маленький экран)
- iPad (планшет)

**Android:**
- Samsung Galaxy S21/S22/S23
- Xiaomi (бюджетный сегмент)
- Google Pixel (чистый Android)

---

## 2. Окружения

### 2.1 Production (Боевое)

| Параметр | Значение |
|----------|----------|
| **URL бота** | @maincomby_bot |
| **Mini App URL** | t.me/maincomby_bot/app |
| **Supabase** | Production instance |

**Использовать для:** Финального acceptance-тестирования

### 2.2 Staging (Тестовое)

| Параметр | Значение |
|----------|----------|
| **URL бота** | @maincomby_staging_bot |
| **Mini App URL** | [staging URL] |
| **Supabase** | Staging instance |

**Использовать для:** Основного тестирования, регрессии

---

## 3. Тестовые аккаунты

### 3.1 Таблица тестовых аккаунтов

| Роль | Telegram Username | Подписка | Особенности |
|------|-------------------|----------|-------------|
| **Free User** | @test_free_user | Free | 5 свайпов/день, базовый профиль |
| **Light User** | @test_light_user | Light | 20 свайпов/день, расширенные функции |
| **Pro User** | @test_pro_user | Pro | Безлимит, все функции |
| **Volunteer** | @test_volunteer | Free | Права на check-in событий |
| **Admin** | @test_admin | Pro | Полные права администратора |
| **New User** | @test_new_user | - | Для тестирования онбординга |

### 3.2 Характеристики аккаунтов

#### Free User
- XP: 50 (ранг: newcomer)
- Свайпов в день: 5
- Событий посещено: 0
- Матчей: 0
- Профиль: минимально заполнен

#### Light User
- XP: 350 (ранг: activist)
- Свайпов в день: 20
- Событий посещено: 3
- Матчей: 5
- Профиль: полностью заполнен
- Активные достижения: first_step, on_fire

#### Pro User
- XP: 1500 (ранг: contributor)
- Свайпов в день: безлимит
- Событий посещено: 10
- Матчей: 15
- Профиль: полностью заполнен
- Скин: Pro Member
- Все базовые достижения

#### Volunteer
- Права: `can_checkin_events`
- Доступ к QR-сканеру
- Может отмечать посещение участников

#### Admin
- Права: `is_admin`
- Доступ ко всем функциям
- Может управлять событиями

---

## 4. Тестовые данные

### 4.1 Тестовые события

| ID | Название | Тип | Дата | Статус |
|----|----------|-----|------|--------|
| 1 | Test Workshop | workshop | Завтра 19:00 | active |
| 2 | Test Meetup | meetup | Через 3 дня | active |
| 3 | Test Conference | conference | Через неделю | active |
| 4 | Test Hackathon | hackathon | Через 2 недели | active |
| 5 | Past Event | meetup | Вчера | completed |

### 4.2 Тестовые компании

| ID | Название | Отрасль | Верифицирована |
|----|----------|---------|----------------|
| 1 | Test Company A | IT | Да |
| 2 | Test Startup B | Fintech | Да |
| 3 | Test Corp C | Consulting | Нет |

### 4.3 Тестовые скины

| Slug | Название | Доступность |
|------|----------|-------------|
| core_team | Core Team | Только для команды |
| volunteer | Volunteer | За волонтерство |
| speaker | Speaker | За выступление |
| champion | Champion | Топ-3 лидерборда |
| pro_member | Pro Member | С Pro подпиской |

### 4.4 Тестовые профили для свайпов

В системе должно быть минимум 20 тестовых профилей для проверки системы свайпов:
- 10 профилей в городе "Москва"
- 5 профилей в городе "Санкт-Петербург"
- 5 профилей без указания города

---

## 5. Доступ к базе данных

### 5.1 Supabase Dashboard

**URL:** https://supabase.com/dashboard/project/[project_id]

**Основные таблицы:**
- `bot_users` - пользователи
- `bot_profiles` - профили
- `bot_events` - события
- `bot_registrations` - регистрации
- `bot_swipes` - свайпы
- `bot_matches` - матчи
- `xp_transactions` - транзакции XP
- `app_notifications` - уведомления

### 5.2 Полезные SQL-запросы

**Проверить XP пользователя:**
```sql
SELECT id, xp, subscription_tier
FROM bot_users
WHERE tg_user_id = '[telegram_id]';
```

**Проверить регистрации на событие:**
```sql
SELECT * FROM bot_registrations
WHERE event_id = [event_id]
AND status = 'registered';
```

**Проверить матчи пользователя:**
```sql
SELECT * FROM bot_matches
WHERE user1_id = '[user_id]'
OR user2_id = '[user_id]';
```

**Сбросить свайпы пользователя (для тестирования):**
```sql
DELETE FROM bot_swipes
WHERE swiper_id = '[user_id]';
```

---

## 6. Подготовка тестового окружения

### 6.1 Перед началом тестирования

1. **Проверить тестовые аккаунты:**
   - Войти в каждый аккаунт
   - Убедиться, что данные соответствуют описанию

2. **Проверить тестовые события:**
   - Убедиться, что активные события есть в списке
   - Даты событий актуальны

3. **Очистить тестовые данные (при необходимости):**
   - Удалить старые регистрации
   - Сбросить свайпы
   - Обнулить счетчики

### 6.2 После тестирования

1. **Восстановить данные:**
   - Вернуть XP к исходным значениям
   - Удалить тестовые регистрации
   - Очистить тестовые матчи

2. **Документировать изменения:**
   - Записать какие данные были изменены
   - Указать в отчете о тестировании

---

## 7. Известные ограничения

1. **Telegram WebApp API:**
   - Push-уведомления работают только в Telegram 8.0+
   - QR-сканер может не работать на некоторых устройствах
   - Haptic feedback не работает на десктопе

2. **Ограничения Free аккаунта:**
   - 5 свайпов в день (сбрасывается в полночь UTC)
   - Нет доступа к суперлайкам
   - Нельзя видеть кто лайкнул

3. **Ограничения staging окружения:**
   - Данные могут периодически сбрасываться
   - Push-уведомления могут не доходить
