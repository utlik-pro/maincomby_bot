name: Deploy to VPS via Webhook

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger deployment webhook
        run: |
          curl -X POST "${{ secrets.WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d '{"ref": "${{ github.ref }}", "repository": "${{ github.repository }}"}'

      - name: Wait for deployment
        run: sleep 30

      - name: Notify completion
        run: echo "âœ… Deployment triggered successfully"
